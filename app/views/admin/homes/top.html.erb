<div class="container">
  <div class="mb-3 row">
    <div class="col-lg-4 d-flex justify-content-center" style="background-color: secondarys" >
      <h4 class="px-3 my-3 bg-secondary text-white">注文履歴覧</h4>
    </div>
  </div>

    <!-- 注文履歴一覧をテーブル を使用して表示 -->
  <div class="row d-flex justify-content-center">
    <div class="col-lg-10">
      <table class="table">
        <tr class="table-light">
          <th scope="col" style="width: 20%">購入日時</th>
          <th scope="col" style="width: 20%">購入者</th>
          <th scope="col" style="width: 10%">注文個数</th>
          <th scope="col" style="width: 30%">注文ステータス</th>
        </tr>
        <% @orders.each do |order| %>
        <tr>
          <td><!-- 注文詳細画面へ遷移 -->
            <%= link_to order.created_at.strftime("%Y/%m/%d %H:%M"), admin_order_path(order.id), class:"link-dark" %>
          </td>
          <td>
            <%= order.customer.last_name %><%= order.customer.first_name %>
          </td>
          <td>
            <!-- 注文個数を足して、出力 -->
            <% @sum = 0 %>
            <% order.order_details.each do |order_detail| %>
              <% @sum += order_detail.amount %>
            <% end %>
            <%= @sum %>
          </td>
          <td>
            <%= order.status_i18n %>
          </td>
        </tr>
        <% end %>
      </table>
    </div>
    <div class="d-flex justify-content-center">
      <%= paginate @orders %>
    </div>
  </div>
</div>
